<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Array Cardio 💪💪</title>
</head>
<body>
  <p><em>Psst: have a look at the JavaScript Console</em> 💁</p>
  <script>
    // ## Array Cardio Day 2

    const people = [
      { name: 'Wes', year: 1988 },
      { name: 'Kait', year: 1986 },
      { name: 'Irv', year: 1970 },
      { name: 'Lux', year: 2015 }
    ];

    const comments = [
      { text: 'Love this!', id: 523423 },
      { text: 'Super good', id: 823423 },
      { text: 'You are the best', id: 2039842 },
      { text: 'Ramen is my fav food ever', id: 123523 },
      { text: 'Nice Nice Nice!', id: 542328 }
    ];

    // Some and Every Checks
    // Array.prototype.some() 
    // is at least one person 19 or older?
    const currentYear = new Date().getFullYear()
    //console.log(currentYear)
    const someAdult = people.some(person => (currentYear - person.year) >= 19)
    //console.log(someAdult)


    // Array.prototype.every() 
    // is everyone 19 or older?
    const currentY = new Date().getFullYear()
    //console.log(currentY)
    const allAdults = people.every(person => (currentY - person.year) >= 19)
    //console.log(allAdults)


    // Array.prototype.find()
    // Find is like filter, but instead returns just the one you are looking for
    // find the comment with the ID of 823423
    const comment = comments.find(c => c.id == 823423)
    //console.log(comment)


    // Array.prototype.findIndex()
    // Find the comment with this ID
    const cIndex = comments.findIndex(c => c.id == 823423)
    //console.log(cIndex)

    var array = [ {'a': '12', 'b':'10'}, {'a': '20', 'b':'22'} ];
    var newArray = array.map(x => {
      x.c = Number(x.a) - Number(x.b)
      x.d = Math.floor(x.a) - Math.floor(x.b)
      return x
    })
    //console.log(newArray)

    //Filter the even numbers
    const arrayOfNumbers = [1,2,3,4,5,6,7,8,9]
    const arrayOfEvenNumbers = arrayOfNumbers.filter(n => n%2 === 0)
    //console.log(arrayOfEvenNumbers)
    const sumOfNumbers = arrayOfNumbers.reduce((acc, num) => {
      return acc + num
    }, 0)
    //console.log(sumOfNumbers)

    //Do a simple string search
    var strings = ["hello", "Matt", "Mastodon", "Cat", "Dog"];
    const stringIncludes = strings.filter(s => s.includes('at'))
    //console.log(stringIncludes)

const spotifySongs = [
  { id: 1, name: "Curl of the Burl", artist: "Mastodon", duration: 204 },
  { id: 2, name: "Oblivion", artist: "Mastodon", duration: 306 },
  { id: 3, name: "Flying Whales", artist: "Gojira", duration: 444 },
  { id: 4, name: "L'Enfant Sauvage", artist: "Gojira", duration: 246 }
];

const lastFmSongs = [
  { id: 5, name: "Chop Suey", artist: "System of a Down", duration: 192 },
  { id: 6, name: "Throne", artist: "Bring me the Horizon", duration: 186 },
  { id: 7, name: "Destrier", artist: "Agent Fresco", duration: 132 },
  { id: 8, name: "Out of the Black", artist: "Royal Blood", duration: 240 }
];

const allSongs = [...spotifySongs, ...lastFmSongs];

//Transforming the given array and adding and removing properties from each object
var listOfSongs = allSongs.map(song => {
  let {artist, ...noArtist} = song
  // Object.assign(noArtist, {
  //   year: 2010
  // })
  return {
    ...noArtist,
    year: 2011
  }
})
//console.log(listOfSongs)

const listOfSongsFiltered = allSongs.filter(s => s.artist.toLowerCase() == 'mastodon')
//console.log(listOfSongsFiltered)

const listOfArtists = allSongs.reduce((acc, val) => {
  let currentArtist = val.artist
  let artistsSongs = acc[currentArtist] ? (acc[currentArtist] + 1) : 1
  return {
    ...acc,
    [currentArtist]: artistsSongs
  }
},{})
//console.log(listOfArtists)

//Difference between let and var
for (let i = 0; i < 3; i++) {
  //setTimeout( () => console.log('let=' + i), 3000)
  //console.log('var=' + i)
}

//Now we must get a string separated by commas with all the songs that have a duration superior to 3 minutes.
const arrayOfLongSongs = allSongs.filter(song => (song.duration/60) > 3).map(s => s.name )
//console.log(arrayOfLongSongs.join(', '))
 
 //Remove dublicates from Array

const sourceArray = [2, 5, 6, 7, 8, 5, 2, 5, 9]
const resArr = []
//#1 function getRes(arr) {
//   arr.filter(val => !(resArr.includes(val)) ? resArr.push(val) : false)
//   return resArr
// } 
// console.log(getRes(sourceArray))

//#2 let len = sourceArray.length
// sourceArray.sort()
// let temp = 0
// for (let i=0; i<len; i++) {
//   if( sourceArray[i] !== temp) {
//     temp = sourceArray[i]
//     resArr.push(sourceArray[i]) 
//   }
// }
// console.log(resArr)

//#3 obj = {}
// for(let i of sourceArray) {
//   obj[i] = true
// }
// console.log(obj)
// let b = Object.keys(obj)
// console.log(b)

let bSet = [... new Set(sourceArray)]
console.log(bSet)


  </script>
</body>
</html>
